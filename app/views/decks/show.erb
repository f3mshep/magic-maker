<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="/"> <img src="https://i.imgur.com/TOn9Mw5.png" width="40"> Magic Maker</a>
  
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item">
        <a class="nav-link" href="/home">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/cards/search">Card Search</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/decks/new">Build deck</a>
      </li>
    </ul>
		<ul class="navbar-nav col-auto">
			<li class="nav-item">
        <a class="nav-link" href="#">Your account</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href= "/logout" >Sign out</a>
      </li>
		</ul>
  </div>
</nav>

<br>
<div class="container col-md-10 content-box">
	<div class="container-fluid">
		<h3 style="display: inline;"> <%=@deck.name%> </h3>
		<!-- options for the owner to interact with the deck -->
			<%if @user == @deck.user%>
				<div style="display: inline;" class="container">
					<form style="display: inline;" method="post" action="/decks/<%=@deck.slug%>/delete">
						<input type="hidden" name="_method" value="DELETE">
						<a class="btn-material-second" href="/decks/<%=@deck.slug%>/edit">EDIT</a>
						<button class="btn-material">Delete</button>
					</form>
				</div>
			<%end%>
		 <h5>by <%=@deck.user.name%></h5>
	</div>
<!-- lists info about deck here -->
<hr>
		<h4>Description</h4>
			<br>
		<p><%=@deck.description%></p>

		<div class="row justify-content-start">
			<div class="hover_img col-md-3">
				<h4>Creatures</h4>
				<%@deck.cards_of_type("creature").each do |card, amount|%>
					<% card_info = Card.find_by_slug(card.to_slug)%>


					<%="#{amount}x "%><a href="/cards/<%=card.to_slug%>"> <%="#{card}"%> <span><img src="<%=card_info.image_url%>" alt="<%=card%>" height="400" /></span></a><br>
				<%end%>	
			</div>

			<div class="hover_img col-md-3">
				<h4>Spells</h4>
				<%@deck.cards_of_type("spell").each do |card, amount|%>
					<% card_info = Card.find_by_slug(card.to_slug)%>

					<%="#{amount}x "%><a href="/cards/<%=card.to_slug%>"> <%="#{card}"%> <span><img src="<%=card_info.image_url%>" alt="<%=card%>" height="400" /></span></a><br>
				<%end%>
			</div>

			<div class="hover_img col-md-3">
					<h4>Lands</h4>
					<%@deck.cards_of_type("land").each do |card, amount|%>
						<% card_info = Card.find_by_slug(card.to_slug)%>

						<%="#{amount}x "%><a href="/cards/<%=card.to_slug%>"> <%="#{card}"%> <span><img src="<%=card_info.image_url%>" alt="<%=card%>" height="400" /></span></a><br>
					<%end%>	
			</div>
			
			<div class="hover_img col-md-3">
				<h4>Sideboard</h4>
				<%@deck.sideboard.card_hash.each do |card, amount|%>
					<% card_info = Card.find_by_slug(card.to_slug)%>

					<%="#{amount}x "%><a href="/cards/<%=card.to_slug%>"> <%="#{card}"%> <span><img src="<%=card_info.image_url%>" alt="<%=card%>" height="400" /></span></a><br>
				<%end%>
			</div>
		</div> <!-- END OF COLUMN -->
	</div> <!-- END OF  ROW -->

</div>
<br>

<div class="container col-md-10 content-box">
	<!-- these are all the comments -->
	<div>
		<h4 style="display: inline;">Comments</h4> <button type="button" data-toggle="modal" data-target="#leaveComment" style="display: inline;" class="btn btn-primary pull-right">Post a Comment</button>
	</div>
	
	<br>
	<%@deck.comments.each do |comment|%>
		<div class="container">
			<p><%=comment.content%></p>
			<p><%="-#{comment.user.name} #{comment.created_at.localtime.pretty}"%></p>
			<%if comment.user == @user%>
				<form method="post" action="/comments/<%=comment.id%>/edit">
					<input type="hidden" name="_method" value="DELETE">
					<a class="btn-material-second" href="/comments/<%=comment.id%>/edit">Edit</a>
					<button class="btn-material">Delete</button>
				</form>
			<%end%>
		</div>
		<hr>
	<%end%>
</div>


<!-- Create new comment area-->	
<div class="modal fade" id="leaveComment" tabindex="-1" role="dialog" aria-labelledby="comment" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content content-box">
      <div class="modal-body">
				<div class="container">
						<div class="form-group">
							<form method="post" action="/comments/new">
							<input type="hidden" name="user" value="<%=@user.slug%>">
							<input type="hidden" name="deck" value="<%=@deck.slug%>">
							<textarea class="form-control" placeholder="New comment" name="comment"></textarea>
							<br>
							<button type="submit" class="btn-material-second">Add Comment</button>
						</form>
					</div>
				</div>
      </div>
    </div>
  </div>
</div>



